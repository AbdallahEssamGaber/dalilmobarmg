---
title: الحلقات التكرارية (Loops)
description: تعلم الحلقات التكرارية وأهميتها وإستخداماتها
position: 7
category: fundamentals
createdAt: 1610641443571
updatedAt: 1610641443571
new: false
updated: false
contributors:
  - ebrahimmaher
---

## مقدمة
### مشكلة تكرار الطباعة
تخيل أنك تريد كتابة كود يطبع اﻷعداد من 1 إلى 5، كيف سيكون شكل الكود؟
سأخمن ما ببالك اﻵن، سيكون كالتالي:

```js
console.log(1);
console.log(2);
console.log(3);
console.log(4);
console.log(5);
```
الكود السابق سيُنفذ، وسيطبع اﻷعداد من 1 إلى 5 ولا يوجد مشكلة، لكن ماذا لو أردنا طباعة اﻷعداد من **1 إلى 1000** ؟ وماذا لو أردنا طباعة اﻷعداد من **1 إلى 100000**؟ بالتأكيد لن تتمكن من كتابة 100 ألف أمر طباعة!

### مشكلة تكرار الجمع
لنفرض أني قلت لك اكتب برنامج يطبع مجموع اﻷعداد من 1 إلى 5.. بالتأكيد سيكون شكل الكود كالتالي:

```js
console.log(1+2+3+4+5);
```

لكن لنفرض أني قلت لك اكتب برنامج يطبع مجموع اﻷعداد من 1 إلى 500! عملية صعبة على العقل البشري أكيد وأيضاً اﻷصعب أن تكتبهم كما في المثال السابق! خصوصا لو قلت لك نريد مجموع اﻷعداد من 1 إلى 100000! تحتاج لسنوات حتى تكتبهم كالمثال السابق..

### مشكلة حقيقية
ومع ذلك المشكلات المطروحة باﻷعلى يمكن تنفيذها، من الممكن تضييع أيام في كتابة ألف أمر طباعة مثلاً.. ليس مستحيلاً؛ لكن هناك مشكلات أخرى بنفس الطريقة مستحيل أن تتمكن من حلها! كيف..؟

تخيل أنك تريد برمجة برنامج يقوم بتغيير أسماء كل الملفات الموجودة في مجلد معين على حاسوبك، في هذه المشكلة أنت لا تعلم كم سيكون عدد الملفات ! فهناك مجلدات فيها آلاف الملفات، وهناك فيها مئات، وهناك فيها عشرات الملفات! إذن كيف ستنفذها..؟ هل ستكتب 1000 أمر لتغيير أسماء الملفات؟ لنفرض أن الملفات كانوا فقط 5! ولنفرض أنهم كانوا 2000! إذن لا يمكنك حل هذه المشكلة ولو حتى ستمكث أيام تكرر في اﻷوامر وتكتب آلاف اﻷسطر!

**وهنا يأتي دور الحلقات التكرارية لحل المشكلات السابقة بكل سهولة!**

## ما هي الحلقات التكرارية؟ (Loops)
هي عملية تكرار أمر أو عدة أوامر في البرنامج.

وهناك عدة أنواع من الحلقات التكرارية:
- while
- do... while
- for

وهناك أنواعاً أخرى من الحلقات التكرارية تختلف من لغة ﻷخرى، ويختلف أسماؤها ويختلف استخدامها، لكن كل الحلقات التكرارية هي نفس المفهوم وتؤدي نفس الغرض، فأساس الحلقات التكرارية هي `while` ولكن اشتقت منها حلقات تكرارية أخرى تكون أسرع وأسهل في حالات معينة!

<base-alert type="tip">

المفسر عندما يمر على الحلقة التكرارية فإنه يتحقق من الشرط، إذا كان الشرط `true` ينفذ اﻷوامر الموجودة بداخل الحلقة التكرارية ثم يعود مرة أخرى لبداية الحلقة التكرارية ليتحقق مرة أخرى من الشرط، فإذا كان الشرط ينتج عنه `true` سيقوم المفسر بتنفيذ الأوامر الموجودة بداخل الحلقة التكرارية مرة أخرى وتتكرر هذه العملية إلى أن يكون ناتج الشرط `false` فيتوقف المفسر عن التكرار ويمر على باقي الكود...

</base-alert>

واﻵن لنبدأ بكتابة كود أول حلقة تكرارية...

## `While` loop
هي النوع الرئيسي من الحلقات التكرارية، وبفهمها تكون أتقنت الحلقات التكرارية، أما باقي اﻷنواع فهي مشتقة منها لتسهّل الإستخدام في حالات معينة فقط.

### كيفية استخدام `while`
هل تتذكر درس الشروط بـ `if` ؟ لن يختلف الوضع كثيراً هنا... تُكتب الحلقة التكرارية بهذه الطريقة:
```js
while (/* الشرط هنا */){
  // أوامر الحلقة هنا
}
```

في المثال السابق تتكون الحلقة من:
- `while`
- **الشرط** ويوضع بين اﻷقواس
- **كتلة اﻷوامر**: أو نسميها (Block) وكما ذكرنا سابقاً في [درس بنية الكود](/tutorials/algorithms/fundamentals/syntax) ، فهي توضع بين `{}`

هذا هو أبسط شكل للحلقة التكرارية... لنجرب طباعة من 1 إلى 5:
```js
var i = 1;
while (i <= 5){
  console.log(i);
}
```
<base-alert type="error">

**ﻻ تجرب المثال السابق أبداً**: فهو حلقة لا نهائية! أي إذا شغلته لن يتوقف البرنامج عن التكرار، بالتالي ربما يتوقف جهازك أو يتوقف البرنامج الذي تشغل عليه الكود! وتسمى باﻹنجليزية (Infinite Loop)

</base-alert>

سنشرح المثال السابق خطوة خطوة، اﻵن كما قلنا بين اﻷقواس يوضع الشرط، وإذا كان ناتج هذا الشرط `true` سيقوم المفسر بتنفيذ كتلة اﻷوامر داخل الحلقة التكرارية ثم يعود للتحقق من الشرط مرة أخرى؛ فإذا تحقق الشرط وكان الناتج `true` سيقوم بالتكرار مرة أخرى وينفذ الكود ويعود ليتحقق وتكرر العملية هذه إلى أن ﻻ يتحقق الشرط ويكون ناتجه `false`

لكن في المثال السابق قلنا أن `i` تساوي `1` ثم وضعنا الشرط `i <= 5` وبالتالي ناتج هذا الشرط `true` ﻷن الواحد أقل من 5! بالتالي سيقوم المفسر بتنفيذ كتلة اﻷوامر الموجودة داخل الحلقة التكرارية، أي سيطبع `1`، ثم يعود المفسر يتحقق من الشرط مرة أخرى، سيجد نفس الناتج `true` وتظل هذه العملية في تكرار إلى مالا نهاية!!

وبالتالي المثال السابق لا يمكن أن ينجح إلا إذا تغيرت قيمة i في وقت معين لتُصبح اكبر من `5` وبالتالي ﻻ يتحقق الشرط ويتوقف المفسر عن التكرار! لذلك يمكن حل المشكلة السابقة بشيء ﻻ تخلوا منه الحلقات التكرارية (التي تتعامل مع اﻷعداد) وهو أمر تغيير القيمة! لاحظ معي المثال التالي..

```js{4}
var i = 1;
while (i <= 5){
  console.log(i);
  i = i + 1;
}
```

في المثال السابق أضفنا سطر `i = i + 1` في نهاية كتلة اﻷوامر، فما فائدة هذا الأمر؟
هذا اﻷمر هو حل المشكلة التي تحدثنا عنها باﻷعلى، فبعد أن يتحقق الشرط ويدخل المفسر لتنفيذ كتلة اﻷوامر سيقوم بتنفيذ هذا اﻷمر في نهاية كتلة اﻷوامر ثم يعود ليتحقق من الشرط مرة أخرى، **وهذا الأمر سيضيف `1` على قيمة `i` الحالية!**

### كيف تعمل الحلقات التكرارية؟
فلنتخيل ما سيحدث في المثال السابق:

**أولاً:** سيمر المفسر على الكود ليجد الحلقة التكرارية، سيتحقق من الشرط وهو `i <= 5` وقيمة `i` تساوي `1` إذن يكون الشرط `1 <= 5` وهذا الشرط ناتجه `true`

<br>

**ثانياً:** بما أن الشرط تحقق، سيقوم المفسر بتنفيذ اﻷوامر الموجودة بداخل الحلقة التكرارية:
- فيقوم بطباعة `i` وهي قيمتها الحالية `1` بالتالي سيطبع `1`
- ثم ينفذ اﻷمر التالي `i = i + 1` وهذا الأمر سيقوم بإضافة `1` على قيمة `i` وقيمة `i` في الوقت الحالي تساوي `1` إذن ستصبح `i` بعد هذا اﻷمر تساوي `2`

<br>

**ثالثاً:** يعود المفسر للتحقق من الشرط مرة أخرى! ويكون الشرط في هذه المرة `2 <= 5` ﻷن `i` أصبحت قيمتها `2` اﻵن! وهذا الشرط ناتجه `true` فيقوم المفسر مرة أخرى بتنفيذ كتلة اﻷوامر:
- فسيقوم بطباعة `i` وقيمتها حالياً أصبحت `2` بالتالي سيطبع `2`
- ثم ينفذ اﻷمر `i = i + 1` فتصبح قيمة `i` الجديدة تساوي `3`

ثم تتكرر نفس العملية مع `3` فيطبع المفسر `3` وتُصبح قيمة `i` تساوي `4`، ثم يطبع المفسر `4` وتصبح قيمة `i` تساوي `5`

<br>

**رابعاً:** سيعود المفسر ليتحقق من الشرط، واﻵن أصبحت قيمة `i` تساوي `5` فيكون الشرط هكذا `5 <= 5` وهذا الشرط يتحقق ﻷن `5` تساوي `5` بالتالي سينفذ المفسر كتلة اﻷوامر:
- يقوم بطباعة `5`
- يقوم بإضافة `1` إلى `i` **فتصبح قيمتها الجديدة `6`**

<br>

**أخيراً:** يعود المفسر للتحقق من الشرط مرة أخرى وقيمة `i` أصبحت `6` اﻵن... فيكون الشرط `6 <= 5` وهذا الشرط لا يتحقق ﻷن 6 ليست أقل من أو تساوي 5، بالتالي يكون الناتج `false` **فيمر المفسر هذه المرة بدون تنفيذ كتلة اﻷوامر وتكون انتهت الحلقة التكرارية!**

## أمثلة على `While`
### طباعة اﻷعداد من 1 إلى 10
```js
var i = 1;
while (i <= 10){
  console.log(i);
  i = i + 1;
}
```
<expand full button-text="عرض الناتج" hide-text="إخفاء الناتج">

<code-result>

1
<br>
2
<br>
3
<br>
4
<br>
5
<br>
6
<br>
7
<br>
8
<br>
9
<br>
10
<br>

</code-result>

</expand>

> ويمكنك بنفس الطريقة طباعة اﻷعداد من 1 إلى 1000! جربها اﻵن..

### جمع اﻷعداد من 1 إلى 10
جرب اﻵن جمع اﻷعداد من **1 إلى 10** (1+2+3+...+10) سيكون الناتج `55`، ويمكننا كتابة حلقة تكرارية تجمع اﻷعداد من 1 إلى 10:

> **هذا المثال متقدم لذلك كثّف التركيز**
```js
var i = 1;
var result = 0;

while (i <= 10){
  result = result + i;
  i = i + 1;
}

console.log(result);
```
<code-result>
55
</code-result>

في المثال السابق:
- قمنا بإنشاء متغير `i` قيمته `1` وهو المتغير المرتبط بالحلقة التكرارية، وقيمته 1 ﻷننا سنبدأ الحلقة من 1
- قمنا بإنشاء متغير اسمه `result` وهو ناتج عملية الجمع، وفي البداية قيمته صفر ﻷننا لم نجمع عليه أي عدد حتى اﻵن (الصفر عنصر محايد للجمع)
- قمنا بإنشاء حلقة تكرارية ستتكرر 10 مرات، من 1 إلى 10... وفي كل مرة سنقوم بإضافة `i` إلى `result` فمثلاً في البداية `result` قيمته `0`، و`i` قيمته `1` إذن سنقوم بإضافة 1 إلى `result` فتُصبح قيمته `1`، ثم تتكرر الحلقة واﻵن `result = 1` و `i = 2` بالتالي عند إضافة `i` إلى `result` ستكون النتيجة `3`، ثم تتكرر الحلقة وتصبح قيمة `reult` تساوي `3 + 3` أي `6` ***وتتكرر هذه العملية إلى 10***
- ثم بعد إنتهاء الحلقة التكرارية وبعدما يمر المفسر لتنفيذ اﻷوامر التي تأتي بعد الحلقة التكرارية، قمنا بإضافة أمر طباعة لقيمة `result` حتى نعرف ما نتيجة عملية الجمع بعد التكرار 10 مرات!


### ضرب اﻷعداد من 1 إلى 1000
هذه العملية شبه مستحيلة عليك بعقلك، أن تضرب اﻷعداد من 1 إلى 20 (`1*2*3*4*5...*20`) لكن يمكن للحاسوب القيام بها في جزء من الثانية! عن طريق الكود التالي:

```js
var i = 1;
var result = 1;

while (i <= 20){
  result = result * i;
  i = i + 1;
}

console.log(result);
```
<code-result>
2432902008176640000
</code-result>

> قم بتجربة الكود وتشغيله وانظر الناتج! يمكن استخدام محرر دليل مبرمج السريع عن طريق الضغط على الزر أسفل يسار الشاشة

> تم تغيير قيمة `result` اﻷولية من صفر إلى 1، ﻷن في الرياضيات ضرب أي عدد * صفر = صفر، أما 1 فهو العنصر المحايد لعملية الضرب

> لاحظ أننا غيرنا العملية من `+` إلى `*` وغيرنا عدد مرات التكرار من `10` إلى `20`

## الحلقات التكرارية المتداخلة (Nested Loops)

يمكن إنشاء حلقة تكرارية بداخل حلقة تكرارية، فكما قلنا كل حلقة تكرارية لها كتلة أوامر **Block** والكتلة ممكن أن تتكون من عدة أوامر، وبالتالي يمكن أن نضع بداخل الكتلة حلقات تكرارية أخرى أو شروط أو أي أوامر!

### طباعة اﻷعداد من 1 إلى 4 ثلاث مرات
هذا المثال سيطبع اﻷعداد من 1 إلى 4 ثلاث مرات متتالية
```js
var i = 1;
while (i <= 3){
  var n = 1;
  while(n <= 4){
    console.log(n);
    n = n + 1;
  }
  i = i + 1;
}
```
> جرب المثال السابق في ***محرر دليل مبرمج*** السريع أو محرر النصوص ***vscode***

ويمكننا تحسين المثال السابق عن طريق وضع فراغ بين كل مرة من الثلاث مرات، ولكن كيف تنفيذها؟ بسيطة نتحقق عن طريق `if` إذا كان الرقم الحالي هو **4** إذن نقوم بطباعة `"\n"` وهذه العلامة درسناها في النصوص وتعني سطر جديد.

```js
var i = 1;
while (i <= 3){
  var n = 1;
  while(n <= 4){
    console.log(n);
    if (n == 4){
      console.log("\n");
    }
    n = n + 1;
  }
  i = i + 1;
}
```

## تمارين على الحلقات التكرارية

> قم بمراجعة الدرس مرة أخرى سريعاً خصوصاً من بداية الحديث عن `while` حتى تتمكن من حل التمارين التالية!

<quiz>

قم بكتابة كود يطبع **اﻷعداد الزوجية** من **0 إلى 20**، أي يطبع 0، 2، 4، 6، 8... إلى 20

</quiz>

<expand full button-text="الحصول على مساعدة" hide-text="إخفاء">

- تبدأ الحلقة التكرارية من 0 وليس من 1 بالتالي قيمة `i` تكون **0** في البداية
- بدلاً من إضافة `1` على `i` في كل تكرار، قم بإضافة `2` بالتالي تتكرر الحلقة في الشكل التالي (0, 2, 4, 6.....)

</expand>


<expand full button-text="عرض الحل" hide-text="إخفاء الحل">

```js
var i = 0;

while (i <= 20){
  console.log(i)
  i = i + 2;
}
```

</expand>

<br>

<quiz>

استخدم الحلقات التكرارية في طباعة ناتج حساب
**2<sup>10</sup>**
(ضرب العدد 2 في نفسه 10 مرات).

</quiz>

<expand full button-text="عرض الحل" hide-text="إخفاء الحل">

```js
var i = 0,
  result = 1;

while (i < 10){
  result = result * 2;
  i = i + 1;
}
console.log(result);
```
<code-result>
1024
</code-result>

> لاحظ أننا بدأنا الحلقة التكرارية من 0 وليس من 1 ولذلك كان الشرط `i < 10` وليس `i <= 10` حتى يعدّ من 0 لـ 9 فيكون التكرار 10 مرات، اما إذا بدأت الحلقة من 1 إذن الشرط يجب أن يكون `i <= 10`

> أمر الطباعة خارج كتلة أوامر الحلقة التكرارية، والسبب هو أننا نريد الطباعة مرة واحدة فقط بعدما تنتهي الحلقة التكرارية ويكون الناتج تم حسابه.
</expand>


<br>

<quiz>

استخدم الحلقات التكرارية في طباعة اﻷعداد من **25 إلى 1** (تنازلي)

</quiz>

<expand full button-text="عرض الحل" hide-text="إخفاء الحل">

```js
var i = 25;
while (i >= 1){
  console.log(i);
  i = i - 1;
}
```
> بدأنا الحلقة التكرارية بـ `25` وغيرنا الشرط بحيث أصبح اﻵن `i >= 1` ومعناه أنه مادامت ***i*** أكبر من أو تساوي 1 قم بطباعة i ثم اطرح 1 منها لتصبح `24` ثم ستتكرر العملية إلى أن تُصبح i أصغر من 1 
</expand>

<br>

<quiz label="تمرين متقدم">

قم بكتابة برنامج يأخذ عدد كقيمة لمتغير اسمه `rows` ويطبع شكل مثلث قائم من النجوم `*` عدد صفوفه `rows`.

> عندما قيمة `rows` تساوي `4` يجب أن يكون الناتج:
<code-result>
*
<br>
**
<br>
***
<br>
****
</code-result>

</quiz>
<expand full button-text="الحصول على مساعدة" hide-text="إخفاء">

> سنستخدم **الحلقات التكرارية المتداخلة** (nested loops) فهناك حلقة تتكرر بعدد الصفوف، وحلقة تتكرر بعدد النجوم في كل صف، أيضاً سنستخدم **دمج النصوص** (concatenation) لدمج النجوم في كل صف.

</expand>

<expand full button-text="عرض الحل" hide-text="إخفاء الحل">

```js
var rows = 4, // enter rows count here
  r = 1;
while (r <= rows){
  var i = 1;
  var stars = '';
  while(i <= r){
    stars = stars + '*';
    i = i + 1;
  }
  // print row stars
  console.log(stars);
  r = r + 1;
}
```
> جرب تغيير قيمة `rows` إلى `8` ليرسم مثلث كبير بقاعدة 8 نجوم

> استخدمنا دمج النصوص (concatenation) يمكنك مراجعته في [درس التعبيرات](/tutorials/algorithms/fundamentals/expressions#دمج-النصوص-concatenation)
</expand>
